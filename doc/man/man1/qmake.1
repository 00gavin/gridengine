'\" t
.\"___INFO__MARK_BEGIN__
.\"
.\" Copyright: 2001 by Sun Microsystems, Inc.
.\"
.\"___INFO__MARK_END__
.\"
.\" $RCSfile: qmake.1,v $     Last Update: $Date: 2001/07/18 11:04:50 $     Revision: $Revision: 1.1 $
.\"
.\"
.\" Some handy macro definitions [from Tom Christensen's man(1) manual page].
.\"
.de SB		\" small and bold
.if !"\\$1"" \\s-2\\fB\&\\$1\\s0\\fR\\$2 \\$3 \\$4 \\$5
..
.\"
.de T		\" switch to typewriter font
.ft CW		\" probably want CW if you don't have TA font
..
.\"
.de TY		\" put $1 in typewriter font
.if t .T
.if n ``\c
\\$1\c
.if t .ft P
.if n \&''\c
\\$2
..
.\"
.de M		\" man page reference
\\fI\\$1\\fR\\|(\\$2)\\$3
..
.TH QMAKE 1 "$Date: 2001/07/18 11:04:50 $" "xxRELxx" "xxQS_NAMExx User Commands"
.SH NAME
qmake \- distributed parallel make, scheduling by xxQS_NAMExx.
.PP
.SH SYNTAX
.B qmake
[
.B options
] -- [
.B gmake options
]
.PP
.SH DESCRIPTION
.I Qmake
is a parallel, distributed
.M make 1
utility. Scheduling of the parallel
.I make
tasks is done by xxQS_NAMExx. It is based on
.I gmake
(GNU make), version 3.78.1. Both xxQS_NAMExx and
.I gmake
commandline options can be specified. They are separated by "--".
.PP
All xxQS_NAMExx options valid with
.M qsub 1
or
.M qrsh 1
can be specified with
.I qmake
- see
.M submit 1
for a description of all xxQS_NAMExx commandline options.
The
.M make 1
manual page describes the
.I gmake
commandline syntax.
.PP
The syntax of
.I qmake
makefiles corresponds to
.I gmake
and is described in the "GNU Make Manual".
.\"
.\"
.SH EXAMPLES
.sp 1
.nf
.RS
qmake -pe compiling 1-10 --
.RE
.fi
.sp 1
will request between 1 and 10 slots in parallel environment "compiling"
on the same architecture as the submit host. The
.I make
tasks will
inherit the complete environment of the calling shell. It will execute
as many parallel tasks as slots have been granted by xxQS_NAMExx.
.sp 1
.nf
.RS
qmake -- -j 4
.RE
.fi
.sp 1
will request between 1 and 4 slots in parallel environment "make" on
the same architecture as the submit host.
.sp 1
.nf
.RS
qmake -l arch=solaris -pe make 3
.RE
.fi
.sp 1
will request 3 parallel
.I make
tasks to be executed on hosts of
architecture "solaris". The submit may be done on a host of any
architecture.
.sp 1
The shell script
.sp 1
.nf
.RS
#!/bin/sh
qmake -inherit -- 
.RE
.fi
.sp 1
can be submitted by 
.sp 1
.nf
.RS
qsub -pe make 1-10 [furter xxqs_name_sxx options] <script>
.RE
.fi
.sp 1
.I Qmake
will inherit the resources granted for the job sumbitted above under
parallel environment "make".
.\"
.\"
.SH "ENVIRONMENTAL VARIABLES"
.\" 
.IP "\fBxxQS_NAME_Sxx_ROOT\fP" 1.5i
Specifies the location of the xxQS_NAMExx standard configuration
files. If not set a default of /usr/xxQS_NAMExx is used.
.\"
.IP "\fBxxQS_NAME_Sxx_CELL\fP" 1.5i
If set, specifies the default xxQS_NAMExx cell. To address a xxQS_NAMExx
cell
.I qmake
uses (in the order of precedence):
.sp 1
.RS
.RS
The name of the cell specified in the environment 
variable xxQS_NAME_Sxx_CELL, if it is set.
.sp 1
The name of the default cell, i.e. \fBdefault\fP.
.sp 1
.RE
.RE
.\"
.IP "\fBxxQS_NAME_Sxx_DEBUG_LEVEL\fP" 1.5i
If set, specifies that debug information
should be written to stderr. In addition the level of
detail in which debug information is generated is defined.
.\"
.IP "\fBCOMMD_PORT\fP" 1.5i
If set, specifies the tcp port on which
.M xxqs_name_sxx_commd 8
is expected to listen for communication requests.
Most installations will use a services map entry instead
to define that port.
.\"
.IP "\fBCOMMD_HOST\fP" 1.5i
If set, specifies the host on which the particular
.M xxqs_name_sxx_commd 8
to be used for xxQS_NAMExx communication of the
.I qmake
client resides.
Per default the local host is used.
.\"
.\"
.SH KNOWN PROBLEMS
.PP
.SS Slow NFS server
Very low file server performance may lead to problems on depending files.
.sp 1
Example: Host a compiles a.c to a.o, host b compiles b.c to b.o, host c
shall link program c from a.o and b.o. In case of very bad NFS
performance, host c might not yet see files a.o and b.o.
.\"
.SS Multiple commands in one rule
If multiple commands are executed in one rule, the makefile has to
ensure that they are handled as one commandline.
.sp 1
Example:
.sp 1
.nf
.RS
libx.a:
.RS
cd x
ar ru libx.a x.o
.RE
.RE
.fi
.sp 1
Building libx.a will fail, if the commands are executed in parallel
(and possibly on different hosts). Write the following instead:
.sp 1
.nf
.RS
libx.a:
.RS
cd x ; ar ru libx.a x.o
.RE
.RE
.fi
.sp 1
or
.sp 1
.nf
.RS
libx.a:
.RS
cd x ; \\
ar ru libx.a x.o
.RE
.RE
.fi
.\"
.\"
.SH SEE ALSO
.M submit 1
as well as
.M make 1
(GNU make manpage) and
.I The GNU Make Manual
in <xxqs_name_sxx_root>/3rd_party/qmake.
.\"
.\"
.SH "COPYRIGHT"
.I Qmake
contains portions of Gnu Make (\fIgmake\fP), which
is the copyright of the Free Software Foundation,
Inc., Boston, MA, and is protected by the Gnu General Public License.
.br
See
.M xxqs_name_sxx_intro 1
and the information provided in <xxqs_name_sxx_root>/3rd_party/qmake
for a statement of further rights and permissions.
