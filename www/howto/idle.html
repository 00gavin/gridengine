<table border="0" cellpadding="2" cellspacing="0" width="100%">
<tr>
<td><b><font color="#336699" size="+2" class="PageHeader">Tracking Interactive Idle Time</font></b></td>
</tr>
</table>
<p>
<table border="0" cellpadding="2" cellspacing="0" width="100%">
<tr>
<td>

<br><br>
<BLOCKQUOTE STYLE="margin-left: 0in; margin-right: 1.18in; text-align: justify">
This note explains how to set up Grid Engine to track interactive
idle time for desktop workstations. This is useful if you want to use
desktop workstations only when the owner is not using it. If the
owner returns and moves the mouse, the queue on this host is
suspended along with the jobs currently running. When the system is
again idle for 5 minutes (or any other amount of time), the jobs on
the host will be resumed. <BR><BR>It is necessary to first add the
attribute to the host complex: 
</BLOCKQUOTE>
<PRE STYLE="margin-left: 0.79in; margin-right: 0.79in; margin-bottom: 0.2in; text-align: justify">
   iidle  ii   DOUBLE infinity   &lt;=   NO   NO   0</PRE><BLOCKQUOTE STYLE="margin-left: 0in; margin-right: 1.18in; text-align: justify">
If you need more information on how to do this, see the appnote
<A HREF="/project/gridengine/howto/resource.html">Attaching A Resource To A Host
in Grid Engine</A>. <BR><BR>Then, you need to have a script (load
sensor) to keep track of the current idle time on each host. A sample
script is included below. <BR><BR>Finally, in the main qmon window,
click on &quot;Cluster Configuration&quot;. Highlight either
&quot;global&quot;, or only certain hosts for this to run on, then
click on &quot;Modify&quot;. On the &quot;General Settings&quot; tab,
add the path and name of the load sensor program to the load sensor
box. Once OK is pressed, the load sensor will be automatically
started on each host. This may take several minutes. 
</BLOCKQUOTE>
<HR>
<PRE STYLE="margin-left: 0.39in; margin-right: 0.39in; text-align: justify">#!/bin/sh

# (c) 2000 Sun Microsystems, Inc
#
# idle.sh
#
# report interactive inactivity in seconds for SOLARIS 2.X
# 

# invariant values
myhost=`hostname`
ARC=`$SGE_ROOT/util/arch`

end=false
while [ $end = false ]; do

   # ---------------------------------------- 
   # wait for an input
   #
   read input
   if [ $? != 0 ]; then
      end=true
      break
   fi
   
   if [ &quot;$input&quot; = &quot;quit&quot; ]; then
      end=true
      break
   fi

   # &quot;filestat -atime&quot; returns time of last access of given file
   # in seconds since 1/1/1970
   #
   kbdtime=`$SGE_ROOT/utilbin/$ARC/filestat -atime /dev/kbd`
   mousetime=`$SGE_ROOT/utilbin/$ARC/filestat -atime /dev/mouse`   

   # &quot;now&quot; returns current time in seconds since 1/1/1970
   #
   now=`$SGE_ROOT/utilbin/$ARC/now`

   if [ &quot;$kbdtime&quot; -gt &quot;$mousetime&quot; ]; then
      idletime=`expr &quot;$now&quot; - &quot;$kbdtime&quot;`
   else
      idletime=`expr &quot;$now&quot; - &quot;$mousetime&quot;`
   fi

   echo &quot;begin&quot;
   echo &quot;$myhost:iidle:$idletime&quot;
   echo &quot;end&quot;
done</PRE>
<p></p>
</table>