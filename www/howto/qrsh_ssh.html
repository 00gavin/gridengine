<<<<<<< qrsh_ssh.html
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
<HEAD>
	<META HTTP-EQUIV="CONTENT-TYPE" CONTENT="text/html; charset=iso-8859-1">
	<TITLE></TITLE>
	<META NAME="GENERATOR" CONTENT="StarOffice 6.0  (Solaris Sparc)">
	<META NAME="CREATED" CONTENT="20020529;10474700">
	<META NAME="CHANGEDBY" CONTENT="Charu Chaubal">
	<META NAME="CHANGED" CONTENT="20020529;12534600">
</HEAD>
<BODY LANG="en-US">
<P STYLE="margin-bottom: 0cm">&nbsp; 
</P>
<TABLE WIDTH=100% BORDER=0 CELLPADDING=2 CELLSPACING=0>
	<TR>
		<TD>
			<H2><FONT COLOR="#336699">Using ssh with qrsh</FONT></H2>
		</TD>
	</TR>
</TABLE>
<TABLE WIDTH=100% BORDER=0 CELLPADDING=2 CELLSPACING=0>
	<COL WIDTH=256*>
	<TR>
		<TD WIDTH=100%>
			<P>By default, the Grid Engine command <B>qrsh</B> will use
			standard remote mechanisms (rsh/rlogin) to establish interactive
			sessions. 
			</P>
			<UL>
				<LI><P><B>qrsh</B> by itself will use rlogin</P>
				<LI><P><B>qrsh</B> with a command will establish a rsh
				connection. 
				</P>
			</UL>
			<P>To enable the rsh/rlogin mechanism, special rsh and rlogin
			binaries are provided with Grid Engine (found in
			$SGE_ROOT/utilbin/$ARCH). In addition, to have full accounting and
			process control for interactive jobs, an extended <B>rshd</B>
			comes with Grid&nbsp;Engine. 
			</P>
			<P>As an alternative, Grid Engine can be configured to use <B>ssh</B>
			instead to start interactive jobs. <BR>&nbsp; 
			</P>
			<H3>Advantages of using ssh:</H3>
			<UL>
				<LI><P STYLE="margin-bottom: 0cm">secure connection 
				</P>
				<LI><P STYLE="margin-bottom: 0cm">no need to have suid root
				programs installed (rsh and rlogin have to be suid root)</P>
				<LI><P STYLE="margin-bottom: 0cm">much larger number of running
				sessions per host (not limited by port number &lt; 1024)</P>
				<LI><P STYLE="margin-bottom: 0cm">compression (if lots of data
				pushed through STDIN/STDOUT)</P>
				<LI><P>possibility to attach a tty to remotely executed commands
				(ssh option -t)</P>
			</UL>
			<H3 STYLE="margin-top: 0cm; margin-bottom: 0cm">Disadvantages:</H3>
			<UL>
				<LI><P STYLE="margin-bottom: 0cm">Lack of complete accounting 
				</P>
				<LI><P>lack of process control (reprioritization) 
				</P>
			</UL>
		</TD>
	</TR>
</TABLE>
<H3>How to setup ssh for qrsh:</H3>
<P STYLE="margin-bottom: 0cm">Have ssh working, all keys created ... 
</P>
<P STYLE="margin-bottom: 0cm">Set the parameters rsh_daemon and
rlogin_daemon in your cluster configuration to ssh: 
</P>
<UL>
	<LI><P>rsh_daemon: /usr/sbin/sshd -i</P>
	<LI><P>rlogin_daemon: /usr/sbin/sshd -i 
	</P>
</UL>
<P STYLE="margin-bottom: 0cm">If you have execution hosts with
different architectures that have different paths to ssh, you will
have to make these settings for each execution host individualy
(qconf -mconf host), else you can change the global cluster
configuration (qconf -mconf).</P>
<P>Set the parameters rsh_command and rlogin_command in your cluster
configuration to ssh:</P>
<UL>
	<LI><P>rsh_command&nbsp;&nbsp;&nbsp;&nbsp; /usr/bin/ssh</P>
	<LI><P>rlogin_command&nbsp; /usr/bin/ssh 
	</P>
</UL>
<P>If you have submit hosts with different architectures that have
different paths to ssh, you will have to make these settings for each
submit host individualy (qconf -mconf host), else you can change the
global cluster configuration (qconf -mconf). <BR>&nbsp; <BR>&nbsp; <BR>&nbsp;</P>
</BODY>
</HTML>=======
<!doctype html public "-//w3c//dtd html 4.0 transitional//en">
<html>
<head>
   <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
   <meta name="GENERATOR" content="Mozilla/4.79C-CCK-MCD  [en] (X11; U; SunOS 5.8 sun4u) [Netscape]">
</head>
<body>
&nbsp;
<table BORDER=0 CELLSPACING=0 CELLPADDING=2 WIDTH="100%" >
<tr>
<td>
<h2>
<font color="#336699">Using ssh with qrsh</font></h2>
</td>
</tr>
</table>

<table BORDER=0 CELLSPACING=0 CELLPADDING=2 WIDTH="100%" >
<tr>
<td>In the default setup qrsh will use the remote mechanisms (rsh/rlogin)
to establish interactive sessions.
<br>qrsh without a command will use rlogin,
<br>qrsh with a command will establish a rsh connection.
<p>To enable the rsh/rlogin mechanism, special rsh and rlogin binaries
are provided with Grid Engine (<tt>utilbin/$ARCH/rsh /rlogin</tt>).
<p>To have full accounting and process control for interactive jobs, an
extended rshd comes with Grid Engine.
<p>As an alternative, Grid Engine can be configured to use ssh instead
to start interactive jobs.
<br>&nbsp;
<h3>
Advantages of using ssh:</h3>

<ul>
<li>
secure connection</li>

<li>
no need to have suid root programs installed (rsh and rlogin have to be
suid root)</li>

<li>
possibility to attach a tty to remotely executed commands (ssh option -t)</li>
</ul>

<h3 STYLE="margin-bottom: 0in">
Disadvantages:</h3>

<ul>
<li STYLE="margin-bottom: 0in">
no complete accounting (you will get cpu usage at job end, but no online
accounting and no values for memory and io)</li>

<li STYLE="margin-bottom: 0in">
no process control (reprioritization) in sgeee mode</li>
</ul>
</td>
</tr>
</table>

<h3>
How to setup ssh for qrsh:</h3>

<ul>
<li>
Have ssh working, all keys created ...</li>

<li>
Set the parameters <tt>rsh_daemon</tt> and <tt>rlogin_daemon </tt>in your
cluster configuration to ssh:</li>

<p><br><tt>rsh_daemon&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; /usr/sbin/sshd
-i</tt>
<br><tt>rlogin_daemon&nbsp;&nbsp;&nbsp;&nbsp; /usr/sbin/sshd -i</tt> (see&nbsp;
<font color="#FF0000"><a href="#Note">#Note</a></font> )
<p>If you have execution hosts with different architectures that have different
paths to ssh, you will have to make these settings for each execution host
individualy (<tt>qconf -mconf host</tt>), else you can change the global
cluster configuration (<tt>qconf -mconf</tt>).
<br>&nbsp;
<li>
Set the parameters <tt>rsh_command</tt> and <tt>rlogin_command</tt> in
your cluster configuration to ssh:</li>

<p><br><tt>rsh_command&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; /usr/bin/ssh</tt>
<br><tt>rlogin_command&nbsp;&nbsp;&nbsp;&nbsp; /usr/bin/ssh</tt>
<p>If you have submit hosts with different architectures that have different
paths to ssh, you will have to make these settings for each submit host
individualy (<tt>qconf -mconf host</tt>), else you can change the global
cluster configuration (<tt>qconf -mconf</tt>).
<br>&nbsp;</ul>

<h3>
Screen based programs</h3>
If you want to execute screen based programs (e.g. vi) through qrsh, you
can configure ssh's -t option to be used.
<br>Include the -t switch to the <tt>rsh_command</tt> parameter:
<p><tt>rsh_command&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; /usr/bin/ssh
-t </tt>(see&nbsp; <a href="#Note">#Note</a> )
<br>&nbsp;
<br>&nbsp;
<h3>
<a NAME="Note"></a><font color="#FF0000">Note</font></h3>
<font color="#000000">In Version 5.3 (not 5.3p1 or higher), only the <tt>rsh_daemon</tt> parameter
can accept arguments. If you want to pass arguments with the other parameters,
you have to write a small wrapper script, like the following and configure
this script as the parameter, e.g. <tt>rlogin_daemon</tt>:</font><font color="#000000"></font>
<p><tt><font color="#000000">#!/bin/sh</font></tt>
<br><tt><font color="#000000">exec /usr/sbin/sshd -i</font></tt>
</body>
</html>
>>>>>>> 1.2
